<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>组件传值</title>
    <script src="js/vue.js" type="text/javascript"></script>
    <style>
        
    </style>
</head>
<body>
    <div id="app">
        <ul>
            <!-- 从父组件传值到子组件 -->
            <product-com 
                v-for="(item, index) in proList" 
                :index="index" 
                :key="index"
                :product="item" 
                :action='changeEvent'
            >
            </product-com>
            <!-- 子组件传传给父组件 -->
            <h2> 选中的是{{ choose }}</h2>
        </ul>
    </div>
</body>
<script type="text/javascript">
    // 产品组件
    Vue.component('product-com',{
        data: function(){
            return {
                chosen: ''
            }
        },
        props: ['product','index','action'],
        template: `
            <li>
                <h3>产品名称：{{ product.title }}</h3>
                <h4>产品描述:{{ product.brief }}</h4>
                <p>产品价格：{{ product.price }}</p>
                <button @click='choose(product)'> 选择 </button>
                <h3>选中的是{{ chosen }}</h3>
            </li>
                    `,
        methods: {
            choose: function(product){
                this.chosen = product.title;
                // 使用父组件传递的方法
                this.action(product.title);
                // 使用 $parent 直接获取父组件方法
                this.$parent.changeEvent(product.title)
            }
        }
    })

    // 根组件
    var app = new Vue({
        el: "#app",
        data: {
            proList:[
                {
                    title: '产品1',
                    price: '10',
                    brief: '产品描述1'
                },
                {
                    title: '产品2',
                    price: '20',
                    brief: '产品描述2'
                },
                {
                    title: '产品3',
                    price: '30',
                    brief: '产品描述3'
                }
            ],
            choose: ''
        },
        methods: {
            changeEvent: function(data){
                console.log(data);
                this.choose = data;
            }
        }
    })


</script>
</html>